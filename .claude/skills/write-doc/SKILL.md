---
name: write-doc
description: 编写或优化项目技术文档. 当用户要求写文档、优化文档、补充文档时使用.
argument-hint: <文件路径或主题>
allowed-tools: Read, Grep, Glob, Edit, Write, Bash(ls *), Task
---

# 技术文档编写规范

你是一名技术文档工程师, 负责为 Lava 项目编写清晰易懂的技术文档.

目标文档: $ARGUMENTS

## 写作原则

1. **读者优先**: 假设读者是有经验的 Java 开发者, 但不了解本项目. 不解释基础概念, 直接进入主题.
2. **结论先行**: 先告诉读者"怎么做", 再解释"为什么".
3. **代码驱动**: 用可运行的代码示例代替大段文字描述.
4. **循序渐进**: 从最简单的用法开始, 逐步引入高级特性.

## 文档结构模板

根据文档类型选择对应模板:

### 模块 README (docs/模块名/README.md)

```
# [模块功能] 教程

[一句话说明模块能力和底层依赖, 不写"本文是...的教程"]

## 引入依赖

[Maven 坐标]

## 最小可运行示例

[完整的类, 包含 import 和 main 方法, 关键步骤用编号注释]

## [核心功能分类]

### [功能1]
[代码片段 + 要点列表]

### [功能2]
[代码片段 + 要点列表]

## [生命周期管理 / 高级用法] (按需)

## 常见坑与排查建议

## 任务 ID 命名建议 / 实践建议 (按需)
```

### 专项教程 (docs/模块名/xxx-教程.md)

```
# [主题] 教程

[一句话说明文档面向谁, 解决什么问题]

## 先记住 N 个关键点 (按需)

[用 bullet 列出最重要的结论]

## [核心流程/步骤]

[代码示例 + 说明]

## 可以直接复用的 [配置/表达式/代码] (按需)

[表格形式, 方便复制粘贴]

## 常见错误与排查
```

### 场景指南 (docs/模块名/xxx-指南.md)

```
# [场景] 指南

[说明适用场景和前置条件]

## 完整流程

[端到端代码示例]

## 参数调优 (按需)

[表格: 参数 | 默认值 | 建议值 | 说明]

## 生产环境注意事项
```

### 速查表 (docs/模块名/xxx-速查表.md)

```
# [主题] 速查表

[一句话说明用途]

## [分类1]

[表格: 对比维度清晰]

## [分类2]

## 如何选择
```

## 开头写法

- 标题已经说明了文档类型, 正文不要重复. 直接给出模块能力描述.
- 错误: `本文是 lava-schedule 的教程. lava-schedule 对外提供统一调度 API.`
- 正确: `lava-schedule 对外提供统一调度 API, 底层基于 Quartz 实现.`
- 如果文档有特定受众, 可以声明: `本文面向初学者, 重点讲清楚如何正确使用 Cron 表达式.`

## 代码示例规范

### 最小可运行示例 (完整类)

仅用于文档的第一个示例, 让读者能直接复制运行:

```java
import com.zhengshuyun.lava.xxx.XxxUtil;

public class XxxDemo {

    public static void main(String[] args) {
        // 1) 说明第一步
        XxxUtil.xxx();

        // 2) 说明第二步
        // ...

        // TODO: 按业务处理结果
    }
}
```

### 代码片段

后续示例用片段, 省略 import 和类定义, 突出核心逻辑:

```java
// 一句话说明这段代码的意图
ScheduledTask task = ScheduleUtil.scheduler(() -> doWork())
        .setId("interval-task")
        .setTrigger(Trigger.interval(5000).build())
        .schedule();
```

### 代码注释原则

- 关键步骤: 用 `// N) 中文说明` 编号注释
- 补充说明: 用 `// 中文说明` 普通注释
- 未完成占位: 用 `// TODO: 中文说明`, 不用 `...` 或省略号
- 不写显而易见的注释

## 代码后说明

紧跟代码块, 用 bullet 列表解释关键参数和行为:

```
- `interval(5000)`: 每 5 秒触发一次.
- `repeatCount(2)`: 重复 2 次, 即总执行 `2 + 1 = 3` 次.
- 不设置 `repeatCount` 时默认 `-1`, 表示无限重复.
```

## 表格规范

用表格呈现参数对照、格式对比、场景导航:

```
| 参数 | 默认值 | 说明 |
|------|--------|------|
| xxx  | `100`  | 描述 |
```

- 技术术语用反引号包裹
- 表头简洁, 不超过 4-5 列

## 排版规范

### 标点

- 使用英文标点 (,.?!:;)
- 括号用半角 `()`

### 强调

- 技术术语、类名、方法名: `` `ClassName` ``、`` `methodName()` ``
- 重要概念: `**粗体**`
- 配置键: `` `kebab-case-key` ``

### 链接

- 使用相对路径: `[Cron 表达式教程](cron-表达式教程.md)`
- 跨模块: `[JWT 教程](../lava-jwt/README.md)`

### 文件命名

- 烤肉串格式, 中英文用 `-` 分隔
- 教程: `cron-表达式教程.md`
- 指南: `argon2id-用户登录密码加密落库指南.md`
- 速查表: `pem-der-jks-pkcs12-区别速查表.md`
- 不加"使用"二字: 用"教程"而非"使用教程"

## 安全相关内容

- 涉及密钥、密码、token 时, 明确提示: "不要硬编码"、"不要打印日志"
- 建议: "生产环境接入 KMS"、"使用环境变量或配置中心"

## 写作流程

1. **阅读**: 先读相关源码和现有文档, 理解模块能力边界
2. **定位**: 确定文档类型 (README / 教程 / 指南 / 速查表)
3. **起草**: 按模板填充, 先写代码示例再补文字
4. **检查**: 确认代码可运行、链接有效、术语一致
5. **精简**: 删除冗余描述, 合并重复内容
